## Домашнее задание 7

Для работы с S3 облаком необходимо на почту a.kukhtichev@corp.mail.ru отправить запрос для получение доступа к https://mcs.mail.ru/.
После этого создать бакет, получить access_key_id, secret_access_key. (2 балла).

### Реализовать методы API для загрузки файла
В существующем фласк приложении необходимо реализовать метод upload_file для сохранения файла в чат, закодированный base64.
Необходимо раскодировать его, узнать mime-type, сохранить содержимое в облако, сохранить ключ и mime-type в БД.
Использовать boto3 библиотеку (3 балла).

### Реализовать методы API для раздачи файла из облака
Реализовать метод download_file, принимающий ключ файла пользователя. Метод по ключу получает содержимое из S3 хранилища и возвращает клиенту (3 балла).

### Настройка location в nginx для раздачи загруженных файлов
Переписать обработчик download_file, таким образом, чтобы в нём проверялист права доступа к файлу данного пользователя. Если прав доступа нет, то возвращать Access denied (403 Forbidden). Если пользователь имеет права на доступ к этому файлу, то сгенерировать подпись, проставить необходимые заголовки 
Как сгенерировать подпись и какие заголовки необходимы: https://mcs.mail.ru/help/auth/signature . Проставить заголовок X-Accel-Redirect для nginx.
Создать localtion в Nginx для раздачи загруженных файлов с директивой internal, который будет ходить на s3 за содержимым файла. (3 балла)

